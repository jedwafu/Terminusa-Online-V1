{% extends "base_new.html" %}

{% block head %}
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
.leaderboard-section {
    padding: 4rem 2rem;
    background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('/static/images/leaderboard-bg.jpg');
    background-size: cover;
    background-position: center;
    min-height: calc(100vh - 60px);
}

.leaderboard-header {
    text-align: center;
    margin-bottom: 3rem;
}

.leaderboard-title {
    font-size: 3rem;
    color: var(--accent-color);
    text-transform: uppercase;
    margin-bottom: 1rem;
    text-shadow: 0 0 10px rgba(108, 49, 255, 0.5);
}

.leaderboard-subtitle {
    font-size: 1.2rem;
    color: #888;
    max-width: 600px;
    margin: 0 auto;
}

.leaderboard-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 2rem;
    gap: 1rem;
}

.tab-button {
    padding: 1rem 2rem;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid var(--accent-color);
    border-radius: 5px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
}

.tab-button.active {
    background: var(--accent-color);
}

.leaderboard-table-container {
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid var(--accent-color);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 2rem;
}

.leaderboard-table {
    width: 100%;
    border-collapse: collapse;
}

.leaderboard-table th,
.leaderboard-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid rgba(108, 49, 255, 0.2);
}

.leaderboard-table th {
    background: rgba(108, 49, 255, 0.1);
    color: var(--accent-color);
    font-weight: bold;
    text-transform: uppercase;
}

.leaderboard-table tr:hover {
    background: rgba(108, 49, 255, 0.05);
}

.rank {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--accent-color);
}

.rank-1 { color: gold; }
.rank-2 { color: silver; }
.rank-3 { color: #cd7f32; }

.hunter-name,
.guild-name {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.hunter-rank,
.guild-rank {
    padding: 0.2rem 0.5rem;
    border-radius: 3px;
    font-size: 0.8rem;
    background: rgba(108, 49, 255, 0.2);
}

.rank-S { color: gold; }
.rank-A { color: #ff5555; }
.rank-B { color: #5555ff; }
.rank-C { color: #55ff55; }
.rank-D { color: #ffff55; }
.rank-E { color: #aaaaaa; }
.rank-F { color: #ffffff; }

.stats {
    display: flex;
    gap: 1rem;
    color: #888;
}

.stat {
    display: flex;
    align-items: center;
    gap: 0.3rem;
}

.stat-icon {
    width: 16px;
    height: 16px;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

@media (max-width: 768px) {
    .leaderboard-tabs {
        flex-direction: column;
    }
    
    .tab-button {
        width: 100%;
    }
    
    .stats {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .leaderboard-table th,
    .leaderboard-table td {
        padding: 0.5rem;
    }
}
</style>
{% endblock %}

{% block content %}
<section class="leaderboard-section">
    <div class="container">
        <div class="leaderboard-header">
            <h1 class="leaderboard-title">Leaderboard</h1>
            <p class="leaderboard-subtitle">The strongest hunters and most powerful guilds in Terminusa Online</p>
        </div>

        <div class="leaderboard-tabs">
            <button class="tab-button active" onclick="showTab('hunters')">Top Hunters</button>
            <button class="tab-button" onclick="showTab('guilds')">Top Guilds</button>
        </div>

        <div id="hunters-tab" class="tab-content active">
            <div class="leaderboard-table-container">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Hunter</th>
                            <th>Level</th>
                            <th>Stats</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for hunter in hunters %}
                        <tr>
                            <td><span class="rank rank-{{ loop.index }}">{{ loop.index }}</span></td>
                            <td>
                                <div class="hunter-name">
                                    {{ hunter.user.username }}
                                    <span class="hunter-rank rank-{{ hunter.rank }}">{{ hunter.rank }}</span>
                                </div>
                            </td>
                            <td>{{ hunter.level }}</td>
                            <td>
                                <div class="stats">
                                    <div class="stat">
                                        <img src="{{ url_for('static', filename='images/gate.png') }}" alt="Gates" class="stat-icon">
                                        {{ hunter.gates_cleared }} Gates
                                    </div>
                                    <div class="stat">
                                        <img src="{{ url_for('static', filename='images/monster.png') }}" alt="Monsters" class="stat-icon">
                                        {{ hunter.monsters_defeated }} Monsters
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div id="guilds-tab" class="tab-content">
            <div class="leaderboard-table-container">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Guild</th>
                            <th>Level</th>
                            <th>Stats</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for guild in guilds %}
                        <tr>
                            <td><span class="rank rank-{{ loop.index }}">{{ loop.index }}</span></td>
                            <td>
                                <div class="guild-name">
                                    {{ guild.name }}
                                    <span class="guild-rank">Level {{ guild.level }}</span>
                                </div>
                            </td>
                            <td>{{ guild.level }}</td>
                            <td>
                                <div class="stats">
                                    <div class="stat">
                                        <img src="{{ url_for('static', filename='images/members.png') }}" alt="Members" class="stat-icon">
                                        {{ guild.member_count }} Members
                                    </div>
                                    <div class="stat">
                                        <img src="{{ url_for('static', filename='images/trophy.png') }}" alt="Achievements" class="stat-icon">
                                        {{ guild.achievement_count }} Achievements
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
function showTab(tabName) {
    // Update tab buttons
    document.querySelectorAll('.tab-button').forEach(button => {
        button.classList.remove('active');
        if (button.textContent.toLowerCase().includes(tabName)) {
            button.classList.add('active');
        }
    });

    // Update tab content
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    document.getElementById(`${tabName}-tab`).classList.add('active');
}
</script>
{% endblock %}
